<!DOCTYPE html>
<html>
<head>
	<title>Circles</title>
	<script type="text/javascript" src="paper-full.js"></script>
	<link rel="stylesheet" type="text/css" href="circles.css">

	<script type="text/paperscript" canvas="myCanvas">


var Ball = function(point, vector, radius) {
	this.point = point;
	this.vector = vector;
	this.radius = radius;
	var color = {
		hue: Math.random() * 360,
		saturation: 1,
		brightness: 1
	};

	var ball = new Path.Circle(this.point, radius);
	ball.fillColor = color;

	this.item = new Group({
		children: [ball],
		transformContent: false,
		position: this.point
	});
}

Ball.prototype.iterate = function() {
	var size = view.size;
	var pre = this.point + this.vector;
	if (pre.x < this.radius || pre.x > size.width - this.radius) this.vector.x *= -1;
	if (pre.y < this.radius || pre.y > size.height - this.radius) this.vector.y *= -1;

	var max = Point.max(this.radius, this.point + this.vector);
	this.item.position = this.point = Point.min(max, size - this.radius);
}

var balls = [];
var maxSpeed = 5;
var maxRadius = 30;
var minRadius = 10;

for(var i=0; i<5; i++){
	var x = 100*i+200;
	for(var j=0; j<5; j++){
		var y = 100*j+200;
		var point = new Point(x,y);
		var vector = new Point((Math.random()*2-1)*maxSpeed,(Math.random()*2-1)*maxSpeed);
		var radius = Math.random()*(maxRadius-minRadius)+minRadius;
		balls[i*5+j] = new Ball(point, vector, radius);
	}
}

function onFrame() {
	for (var i = 0; i<balls.length; i++) {
		balls[i].iterate();
	}
}

	</script>
</head>
<body>
	<canvas id="myCanvas" resize></canvas>
</body>
</html>
